<div class="container">
  <h1><%= @group.name %></h1>

  <% if @group.memberships.where(user: current_user).exists? %>
    <% if current_user == @group.user %>
      <p> You are the creator of the group, you
        can:  <%= link_to "Edit", edit_group_path(@group), class: "btn btn-outline-secondary btn-sm me-2" %>
        or <%= link_to "Delete", group_path(@group), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-outline-secondary btn-sm me-2" %>
        the group. </p>
    <% else %>
      <p>Group created by: <%= @group.user&.username %></p>
    <% end %>

    <br>
    <div><h4>Group members:</h4>
      <br>
      <% @group.memberships.each do |member| %>
      <ul>
        <li> <%= member.user.username %>
        <% if member.user == current_user %>
          <button class="btn btn-outline-secondary btn-sm me-2" > Remove your membership </button>
          <% end %>
        </li>
      </ul>
    <% end %>
    </div>

  <% else %>
    <%= link_to 'Join Group', join_group_path(@group), method: :post %>
  <% end %>
</div>